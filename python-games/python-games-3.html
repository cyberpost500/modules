<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Simple Python &quot;Games&quot; pt. 3</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; }
code > span.dt { color: #204a87; }
code > span.dv { color: #0000cf; }
code > span.bn { color: #0000cf; }
code > span.fl { color: #0000cf; }
code > span.ch { color: #4e9a06; }
code > span.st { color: #4e9a06; }
code > span.co { color: #8f5902; font-style: italic; }
code > span.ot { color: #8f5902; }
code > span.al { color: #ef2929; }
code > span.fu { color: #000000; }
code > span.er { font-weight: bold; }
  </style>
  <link rel="stylesheet" href="/modules/styles.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">Simple Python &quot;Games&quot; pt. 3</h1>
</div>
<div id="TOC">
<ul>
<li><a href="#skillsconcepts"><span class="toc-section-number">1</span> Skills/Concepts</a></li>
<li><a href="#preparation"><span class="toc-section-number">2</span> Preparation</a></li>
<li><a href="#menus"><span class="toc-section-number">3</span> Menus</a><ul>
<li><a href="#background"><span class="toc-section-number">3.1</span> Background</a></li>
<li><a href="#reviewrunmodify-the-code"><span class="toc-section-number">3.2</span> Review/Run/Modify the Code</a></li>
<li><a href="#conclusion"><span class="toc-section-number">3.3</span> Conclusion</a></li>
</ul></li>
<li><a href="#gamier"><span class="toc-section-number">4</span> Gamier</a><ul>
<li><a href="#background-1"><span class="toc-section-number">4.1</span> Background</a></li>
<li><a href="#reviewrunmodify-the-code-1"><span class="toc-section-number">4.2</span> Review/Run/Modify the Code</a></li>
<li><a href="#conclusion-1"><span class="toc-section-number">4.3</span> Conclusion</a></li>
</ul></li>
</ul>
</div>
<h1 id="skillsconcepts"><span class="header-section-number">1</span> Skills/Concepts</h1>
<p>This module is a continuation of the Python Games module.</p>
<p>This module will continue to build on the previous concepts of:</p>
<ul>
<li>SDL</li>
<li>blitting</li>
<li>Drawing APIs</li>
<li>Classes</li>
</ul>
<p>In addition, this module will introduce input handling, finite state machines, and callbacks.</p>
<h1 id="preparation"><span class="header-section-number">2</span> Preparation</h1>
<p>Continue with the same environment from the previous (Python Games) module.</p>
<p>We will be using an existing git repository that contains a fair amount of code instead of producing a new program from scratch. This is to avoid copy and paste errors and allow us to cover material faster.</p>
<p>To get the code, execute the following command:</p>
<pre><code>git clone https://www.github.com/cyberpost500/modules/</code></pre>
<p>Then extract the project repository to your desktop:</p>
<pre><code>cd modules/python-games/
tar -C ~/Desktop/ -xf project.tar</code></pre>
<p>The code will be in the Desktop/project directory.</p>
<h1 id="menus"><span class="header-section-number">3</span> Menus</h1>
<h2 id="background"><span class="header-section-number">3.1</span> Background</h2>
<p>The &quot;game&quot; already features drawing graphics and text, but it doesn't use them in a meaningful way. This module introduces a menuing system.</p>
<p>The code to be modified is in the <code>menus</code> branch. This is something of a departure from previous branches, there are quite a number of changes between this branch and the previous branch.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">git</span> checkout menus</code></pre>
<h2 id="reviewrunmodify-the-code"><span class="header-section-number">3.2</span> Review/Run/Modify the Code</h2>
<ol start="0" style="list-style-type: decimal">
<li>View the Documentation for the program:</li>
</ol>
<pre><code>pydoc game</code></pre>
<p>Press <em>Q</em> to exit when you're done.</p>
<ol style="list-style-type: decimal">
<li>Run the Program:</li>
</ol>
<pre><code>python game.py</code></pre>
<p>Press the escape key and then use the arrow keys to navigate the menu.</p>
<p>Eventually choose the quit option from the menu.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Take a moment to review the content of the file, just skimming through it is fine.</p></li>
<li><p>Change the colors used in the menu, see the <code>create_menu</code> function (line 322).</p></li>
</ol>
<pre class="sourceCode python"><code class="sourceCode python">    <span class="kw">return</span> Menu([MenuItem(<span class="st">&quot;MENU&quot;</span>, <span class="dv">40</span>, WHITE, <span class="ot">None</span>),
                 MenuItem(<span class="st">&quot;play&quot;</span>, <span class="dv">20</span>, WHITE, BLACK, play),
                 MenuItem(<span class="st">&quot;reset&quot;</span>, <span class="dv">20</span>, WHITE, BLACK, reset),
                 MenuItem(<span class="st">&quot;quit&quot;</span>, <span class="dv">20</span>, WHITE, BLACK, doquit)])</code></pre>
<p>You may notice there are variables for some colors, <code>WHITE</code>, <code>BLACK</code>, <code>GREEN</code>, <code>RED</code>, <code>YELLOW</code>, and <code>BLUE</code> are all (currently) valid color options. Use one of those, or define a new color.</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Save and run your program.</p></li>
<li><p>Change the sizes used in the menu, again, see the <code>create_menu</code> function.</p></li>
<li><p>Save and run your program.</p></li>
<li><p>Modify the reset option so that it resets the game to the initial state with the shapes in the upper left hand corner again.</p></li>
</ol>
<p>This modification will require creating a new state, modifying the <code>reset</code> function to assign the global STATE to this new state, and modifying the <code>main</code> function to take an action when the STATE has been set to this new state.</p>
<p>Hints:</p>
<ul>
<li>Create a new state variable (around line 409). You could call it <code>RESET_STATE</code>.</li>
<li>Modify the <code>reset</code> function to update <code>STATE</code> and assign the new value.</li>
<li>Modify the <code>main</code> function to reassign the shapes variable when <code>STATE</code> is in this new <code>STATE</code>.</li>
<li>Make sure the <code>STATE</code> is changed back to the <code>PLAY</code> or <code>MENU</code> state once the shapes have been reassigned.</li>
</ul>
<ol start="9" style="list-style-type: decimal">
<li><p>Save and run your program.</p></li>
<li><p>Revert the file changes back.</p></li>
</ol>
<p>Undo your edits to the file using the following git command:</p>
<pre><code>git checkout game.py</code></pre>
<p>Note: There is a <code>menus_with_reset_example</code> branch for one example of how the reset implementation might work.</p>
<h2 id="conclusion"><span class="header-section-number">3.3</span> Conclusion</h2>
<p>These were small modifications, but they served to help make you familiar with the new program flow and introduce global variables and state machines.</p>
<p>The global variables used by this version of the program were in all capital letters. This is just a convention to make it more obvious when a variable somewhere is actually a global variable. The reason for this is that it can be difficult to tell when a variable being used is actually a global variable.</p>
<p>Global variables can be helpful, but there's a trade off in using them. Global variables are useful because they can be accessed globally. But they can impact maintaining a program into the future because it's not always obvious where the variables are being used, hence the all capitals convention.</p>
<p>The <code>STATE</code> variable was used to track the state of the game. It was made global because it needed to be affected at a very wide scope. The callback functions <code>play</code>, <code>reset</code>, and <code>quit</code>, needed to be able to modify <code>STATE</code> and there was no direct path between the functions to convey this change through any other means. Then, once the <code>STATE</code> had been changed, the <code>main</code> function needed to be able to choose different actions to take when in the new <code>STATE</code> after a callback function executed.</p>
<p>Finite state machines are usually recognizable in code by a state being tracked (the <code>STATE</code> variable) and a main loop that examines the state and then takes action based on the value of the state. This part is generally a series of if statements (or a switch or case statements in other languages). The loop that examines the state will also progress that state through several finite states. In the game these states were MENU, PLAY, RESET, and QUIT. The program began in the menu state and then based on user input it decided what states it should move into. Some states could move into new states without additional input, for example, the RESET state you added, but others, like PLAY and MENU required additional user input to transition to a new state.</p>
<h1 id="gamier"><span class="header-section-number">4</span> Gamier</h1>
<h2 id="background-1"><span class="header-section-number">4.1</span> Background</h2>
<p>The &quot;game&quot; is a little more active, but not really interactive. This module introduces more meaningful input handling.</p>
<p>The code to be modified is in the <code>gamier</code> branch. This again adds a number of changes between this branch and the previous branch.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">git</span> checkout gamier</code></pre>
<h2 id="reviewrunmodify-the-code-1"><span class="header-section-number">4.2</span> Review/Run/Modify the Code</h2>
<ol start="0" style="list-style-type: decimal">
<li>View the Documentation for the program:</li>
</ol>
<pre><code>pydoc game</code></pre>
<p>Press <em>Q</em> to exit when you're done.</p>
<ol style="list-style-type: decimal">
<li>Run the Program:</li>
</ol>
<pre><code>python game.py</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Make the food items always use the same color.</li>
</ol>
<p>Line 533 defines a <code>create_food</code> function, find the element responsible for the color and set it to a constant color instead of using random.</p>
<ol start="3" style="list-style-type: decimal">
<li><p>Save and run your program.</p></li>
<li><p>Change the value of the limit parameter as used by create food, try making it smaller, and then try making it larger, but change it in very small increments.</p></li>
</ol>
<p>Save and run your program between modifications.</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Modify the total number of npcs created by altering the values passed in as the count parameter to <code>create_npc_shapes</code>. See the invocation in <code>initialize</code>.</p></li>
<li><p>Save and run your program.</p></li>
<li><p>Modify the <code>create_npc_shapes</code> function so that npcs are only ever created in the top half of the screen.</p></li>
<li><p>Save and run your program.</p></li>
<li><p>Make the speed of the moving shapes depend on the size of the shape that's moving. Making larger objects move slower will give smaller objects a chance to grow before they can be consumed, but if you make the larger objects faster, the scenario can more quickly eliminate smaller objects.</p></li>
</ol>
<p>Hint: You'll need to find a function common to all of the moving shapes that gets called after the size has been modified but before the shape is drawn again, in order to change the speed.</p>
<ol start="10" style="list-style-type: decimal">
<li><p>Save and run your program.</p></li>
<li><p>Add a shape for the player of the game by extending one of the existing moving shape classes and render a letter or text in the middle of the shape so that it's obvious it's the human/player. Consider that you may also add features to the shape, like eyes/nose/mouth/etc.</p></li>
</ol>
<p>Hints:</p>
<ul>
<li>Some shapes cannot resize, so pick one that can be resized.</li>
<li>Consider modeling the new shape after the bouncing rectangle class
<ul>
<li>This would make the player bounce off a wall</li>
<li>Even if you don't make the new class from the bouncing rectangle, pay attention to the way the BouncingRectangle only needs to over-ride a single method to accomplish what it does.</li>
</ul></li>
<li>Look at the initialization of font and text in main for an idea of how to create the text and image for the label.</li>
<li>Put the actual label blitting into the draw function of the new shape.</li>
</ul>
<ol start="12" style="list-style-type: decimal">
<li><p>We will add input handling in a future module after we discuss the types of input, game objectives, and scoring that should be added to the game. For now, continue to experiment by tweaking and customizing the code.</p></li>
<li><p>As you make changes that you'd like to keep, consider committing those changes, for example:</p></li>
</ol>
<pre><code>git commit -a -m &#39;added a player class&#39;</code></pre>
<p>And after adding more: ~<sub>~</sub> git commit -a -m 'added a label to the player class' <sub><sub><sub><sub>~</sub></sub></sub><sub><sub>~</sub></sub></sub>~<sub>~</sub></p>
<p>Even if it's not quite right you can still commit your changes: ~<sub>~</sub> git commit -a -m 'added a player class, but it's not quite right...' <sub><sub><sub><sub>~</sub></sub></sub><sub><sub>~</sub></sub></sub>~<sub>~</sub></p>
<h2 id="conclusion-1"><span class="header-section-number">4.3</span> Conclusion</h2>
<p>The &quot;game&quot; still isn't an actual game, it's more of a limited simulation in its use of randomly generating content, but the components are getting closer to a full-on game.</p>
<p>You can start to see how the code can be adapted to turn the &quot;game&quot; into a more proper game with elements such as a score count, actual game objectives (eat the food to get larger, get larger to take out other enemies, etc).</p>
<p>To take it further, we need to discuss the sorts of objectives you'd like incorporated into the game and what other features you might want to add.</p>
</body>
</html>
